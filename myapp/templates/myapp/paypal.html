{% extends 'myapp/base.html' %}
{% block title %}<title>Payment</title>{% endblock %}
{% load crispy_forms_tags %}

{% block this %}

<div class="container">
    <div class="row mt-5">
        <div class="col-md-6 offset-md-3">
            <div class="border p-3 bg-white">
                <h3>Payment via Paypal</h3>
                <small>Paypal Options</small>
                <div id="paypal-button-container"></div>

                
            </div>
        </div>
    </div>
</div>




<!-- <script src="https://www.paypal.com/sdk/js?client-id=Adg0BfCvHMJLsT83pZpMnjVn30MxlRNzszx73mhpQslfQprOx3eoFxXWNAm_vC03__NHn0xuGr982SUT-&currency=USD"></script> -->
<script src="https://www.paypal.com/sdk/js?client-id=AeXzk2CyvPCh80D_7OqbFuqUuPYo8jvcT_tpqOFdazwzkfVbhlRLC0Rc86gpr-sOs0rcWQp6WwMDJo1v&currency=USD"></script>


<script >
    var total = '{{order.calculate_cart_total}}'
    console.log('I am integrating with paypal')

    paypal.Buttons({

        style:{
            color:'gold',
            shape:'rect',
        },

        //Set up the transaction
        createOrder: function(data, actions){
            return actions.order.create({
                purchase_units:[{
                    amount:{
                        value:parseFloat(total).toFixed(2)
                    }
                }]
            });
        },

        // Finalize the transaction
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                // Successful capture! For demo purposes:
                alert('Transaction completed')
                // Replace the above to show a success message within this page, e.g.
                // const element = document.getElementById('paypal-button-container');
                // element.innerHTML = '';
                // element.innerHTML = '<h3>Thank you for your payment!</h3>';
                // Or go to another URL:  actions.redirect('thank_you.html');
            });
        }

    }).render('#paypal-button-container')


console.log('This my final sentence')

</script>
<!-- <h3>I love you </h3> -->













{% endblock %}